import base64
import numpy as np
from flask import Flask
from librosa import resample, mu_expand
from vadnet.predict_audio import Predictor
import json
import time
import soundfile as sf
import audioop
from pydub import AudioSegment as am

predictor = Predictor()
app = Flask(__name__)
sr_native = 8000
sr_target = 48000

audio_dict = {
    "msg": "UklGRspFAABXQVZFZm10IBIAAAAHAAEAQB8AAEAfAAABAAgAAABmYWN0BAAAADVFAABkYXRhNUUAAH59//7+fn39/n79/f37/fz9/f79/vv7+f37/Pz8+/v8/Pz8/Pz9/n7+/vz9/P79/n5+fn99fn7+/v59fHx7fXx+fXx7e3t7e3t7e3x9fHt6eXl5enx8fHx6enp8fXx9/358e3x7fH19/35+e3t6e3p8e3p5enl7e3x7fXt7fH19/3x+e319fH18fn//f31+fn59fHx+fv7/f358fX7/fX7+/378/f19/f77/fz+/fz9/f38/fz+/fv7+vn6+vv7+/z7/vr7+/3+/v39/P3+/Pz9/Pv6+vz9/v39/v///fz7+/7+fv9+/35+fv/9/n57fHz+/v1+fH19/v7+/v39/fv8/Pr6+vv7+vv7+/r7+fr5+fn4+vv7/P3+/f39+/38/fz9/f1+/n1+fn5+e3x+/39+fn7/fvz9/P39/n///35+/f7+/fv9/X/9/v37/Pz8/f5/fv5+fv1+/v59fn19/////3x+fX59fXp8e3t6ent8e3x6e3t8fHx7e3l3eHh6enp4eXd6eHp5enp5e3p6eXx6e3t7e3x9fXx8fH1+fn59fH58fHt7e37+/v79/vz+/P79/f3+/v7+/X7+fX16fnx+fX19e3x8fnx9fX59fXx9//79/vz9/fz7+vr8+vz6+/v5+fv5+/n7+vr5+/v7+/v6/P3+fX9+fX9+fXx+fn1+ff5+/n59fn3+/v38f/5+/n1+fn79fv19fnx8fnt9fH17e3x9e3p6eXl5dnp5ent7fXx7enp6e3x8ent7fX19fH5+/v5+fn5+fv7+/n79fv1+/35+fX1+fX59e317fn19fH18fXx8fHt8e319fn39/v39/n7+ff5+/v9+fX1+/v79/X99fXx7fHx7eXl5enl8e3t6enp8e3t7e3t7fXx+fn18fXx7fXx9fX1+fn5+/39+fXx9fn5+fn18fHt5fXt9ff59fn1+fn18fXx9fX19fX19ff9+/v5+fX58fnx+fH17fHx8fH19fn1+fXx/fP5+fn3+fv9/fH59fv/+/v3+/P/9/Pz9/H/8/fz+/v/+/v3+/v/+/H78/v/+/P39/fv9+/z7+v37+/v7+fr5+vv6+ff49vj49/j2+fj4+fj5+vr3+Pj6+vv5/Pr6+vj59vj49/j4+Pr4+Pj39/j3+Pf49/r6+vr5+fn4+vn6+fv8+/v7+/r8/f38/Pz8/Pv5+fn6+/z8/Pv6+fj4+Pn6+fn49/f29/j4+vv6+fr5+vj6+vv8/P38+/39/f39/X77/fz+/f78/vv9+vz7+/v5+vn7+vv8+/r7/Pz9/f3+/v7+/fz+/n7+fX59fH19fXx7e3x8f33+/f38/P3++/39fv7+/Pv7/f1+fnx+fn19fX59e317fXp7e3t5eHh6enx6e3p6enh6eXp6fHp6fHp6eXl5eXt6e3p6ent6enp6enx8fHx7ent7enp6enp8fHx8fHx9fX1+fH18fH17fHx9e3x6fHx8fH18e3x6fHt7fXx+fX16fXx+fXt8eXp6e3p8e3t8fX18fnt8enl5enp8e3t6enp7fH7+/35+/f7/fv79/Pv8+/39/f37/fz+/fz9/f3++/v6+fv9+/z6+/r7/Pz9/f38/Pz7/v3+/vz8+/z7/fv8+fv6+/r9/v7+/v3+/n/+/v//fn5+/n78/fz8/f7//f38/v3+/n59fv59/X9+fX17/n19fXx9fv1+/359/v/+fv7+/v39/H79fn5+fH58fXx+fv9/fv//fn59fX1+/35+fn18fH18fnt9fP5+/35+fn5+fHx8fX1+fn59fH5+/vz9/f39+/39/v7+/fz8/f7//fz8/Pr7/f3+/v37/Pz8/v19fn18fX79f3x8e3t9fH19ent8fn17e3t9fv5+/318fXx9fH/9/f19fn1+fX79/f38ff19fn59fv59/n5+fXx9e3x8fXt8e3p8fH59fn3+/f3+/f78/v39/f38/P39/v38/v38/X5+/v79/n19fH7+/vz7/Pv9/X5+fn79/Pz8/fz8/Pv8+/v7+/v7+/z+/P36+/r9/f9+f37//f39/n19fH5+/n/+fX16fH7+/v39fn57ff/+fv5+/X58fHx+/fz9/H19e3t8fv99fn9+fHt6fH39/v57eXR4dn17/v7+/n18fHx9fXt8fHx6eXh6fHx+fHt7e3x9ent7fH59/3x7enp6enx9fXt5ent6enp6en16eHV3eHt+fXp4d3h4enp5enp6eHZ0c3R1dnRzcnJ1d3d1dXZ4d3l2dXJzdnl8fHx3dXRydHV4enx8end2dHN3ef59f3l4c3J0dnl7f356eHV1d3h9ff78/H96dnd6fv7+/318fHt6eHd6fH98eHV2eXt/fX7+fHp6e/7+/f98e3t8e3p8fn/+fn17enl6fH79fnx6fHp5dXZ5fX9+fHh4eHp9//79/f7+fHp6fPv6+v59fn5+/Pv6/Pz8+vv+fX18fXx9ff37+/57e3t9//39/P7/fH5+f35+fv37/X59fX18fn59e33//nx8e31+/f5+fv76+/3+/v5+fH/59PP3/X19fP369/b0+P97e3379/T1+315enp6e/74+P14c3d8+/f4+//9fXp2ef339Pf9enp+/fv7+/r59/b4+n7+/fj7/Pz39vb6f35+fn399PDy+fz//Pr7+vn2+PP1+Pv6+vf29vj69vb3+/59fv729fX4/Pz9/nl5fvr5/P59fH15eX76+fj5+/57fHt//vn7/n19f/1+fXx+/37+/Xx3dnr+/X54e/z+eXJ3ef3+/np3dHR2ffz7fHt9/nx2dHz6+X13d375+/17fHx//v3+/fr5fnp9fv5/fnt7/vz9fHd5fvx7dXN6/ft9enx+fHl9+/j+fH37+nt2efv29fl9e3v9/Pbw8Pl9fvr4+Pz59PL3fnl1enz69vP2fXl5/Pn6+/v3+Hxzdvrx+3V2/fX8fn769vp6ef34+3t7/fTv7u/y+nRxfO7q6/d7c3r5+nx39u3t8/l9dHX+8e/v9nhwdfr5fXR29+3t93x0cXd2dXnz7vD+dHN6f3l69uns8Xptannx9Pz59/t+enNu/u7p7/xvb3T7+Pn5+fv69/94c3r78Ovtd2tu+u7zfXZ8+390c3R4evz37+3veGtrevX2/nr99/R7cnL++/n07/N5cW90/vLv8fDw9H9taG/16ezv+H51dHh8/Pj5fnh4f/Py/Hl4c29y/390cXN5ff56dHZ8+vf0+Xhsam787vV0anD16Ox5a21+8u31dmtpb3d1dHr07vL5enNtbnf08fl8eXZua2766+v3fn77fHT97+vs7353eP54c3zv7vD2+nx3cW/66ut0Zmn96el9Z2n86er+bmx49/L0/P7+9e7zc2doe+zm6fhvaGt0/fn17+vs8Hpsam767fN0bn3v8HptbG91c3N3+vLw+3dxePz39fj7/Pr5fnh2evj18/n38e71fnVubG577OTm+W1oanF5+vLu6ur3bWZnbXz08PL3+f15dXf+9e3x/HZxdvz08/f8fX5+e3p8+vX0+HlvbXJ89+/w+3Rvb3r47/L1/P12bGhrb3V4fHx8enVzdf34+fj29fv/e3h5fvz+enp3cW1tcn75/Xdzc3d4/vXv7fL3/v19eXd7+3xtZmRobXJvcXr17/Dw7unm5OTj4uTxb2NiaG1vbGhlZmZoam/6593Z19XT1d31bGdra2ZeXF1fXVdSVV115drZ29vUz87T3/xraWlnYl9fXVpVUlRYX3Tn2tnf49zQy83Z7nd0c2heWVpdXVhTUFNba+7g3uPm3dHKyc3a7nl0bWJbWVxfXlhRTlFbbuvh3uHg3NLMys3X7HJoYlxZWl1gXFVPTlFaafLj3uHm4dfMx8jP5GxfXltYVlleYVlPSktSYfvm3t7f3tjOysnP4W1eW1pZWVpeXltTTk9UXnjk29jb3NjOycfL2PdiWVVWWV1eXVlUUE9SWGXu29bX19TOysrP3XlfWVdYXGJoY1pST09VXW/s3tnY2NXOycfL1vVfWVldY2t0bV5SS0pNVmru3tvc3t3YzsjHy9fyYVZSVl976+xsVElFR09g8d3X19zk49bKwsLK3WhVT1Bab+TZ3nJUSUVFTFzp1tPb8Wlj+9XGvrzA0F1HRE111M7U6GdWS0ZGTnvPytF0TkdLY9nLxcG9vcTzRTxEfsjE0WhTVl9cT0pOZ9nR5VRGRVPjy8fKy8W+v9NNPkBgy8LMeFNSW1hMRERR4czQY0ZBTuDHxMjKxb/B1k0+Qm3IwM5eSEpXYlhKR05+1tloS0hX2sfGy87Kwb/NWkJCWdTIznhTUVtcUEdFT/PPz+xRSE14z8jJysfAv8pkQz9O18TH6k9KUF1aTkpR+9bWdk5HTXrPycvOz8nDxdpPQ0l4zcncWUxTanBXSUhV7NPaZk1KWeXPz9bbz8O+xPFJQlLXxcr5TktYbmNOR0xy0s/xTUJGXdjMztLQxr29zVZDR27NydxXTFRz/VpJRlDr0ttdSUdV4M3M0tXMv7u/6Ec+SuTIyvVPTFz+ZktARWLOydtTQ0Zc287R2NPHvbzIW0A/U9XHz2pOTl1pWEhDT97HyvlHPkZqz8rO1tTHvb3RTTw/ZcjA0FlITWj8WkdEVtLDy2JAPUzfx8fR5t/Jvr7STT1E8cTB205FT/fnW0VDWM/BzFo+PUzeys3fduHGvLzSSzxBbsnF3FRKVvr+U0REXMy/yV8/PEjpy8zkZ3bRwL3IZENAUtbHzmxNTVtsX05JUt/HxdxNP0JW3tXjbWzky7++ymNFQ1fXyc9wT01YaWZXUFzfzMvoTUFFV+nd6nF238zCwMn6TUdT69DTflJMVGd1YVVVddXN2WFLRkxe+u3u5NjMw8DG4lBGS2Pd2flaVWB7e11QU3HTy9FtSkJGVXrk4uPd083Jx8vgVkdHUfnX2fVgXmRrZl1aat7P1XJLQEJQ7M/Ky87QzcrN61FFSFzbzdP5WFNZY2Vmb+na239SR0VNZtrOzc/S1dLOztxiTUtW8tXX8l5aX3B8al5cafHoclRJSlrdzMvR3uDUysjWXEhGUunQ13RWV2f7dVpPUWrc1OZYSUpa3s7O197azsjL41RKTnHZ1udmXWn0/F9QTlzn0dX4VU1Ubd7X2+Dg2M7KzuVaT1Vv493oeWxubF5TTlJq28/T6F5PT1l73tbU09LPzdPtWU9Z99rY4nViX19cVFFXcN3R1/NbT09Zb+bc2trY08/S5GBTV3Pe1957XVpcXFlXWnHe1Nr+WU9PWnLj2NTU1tXU1uJpWVt63NbfbllVWl1bVlhm5NTX91dNT1p749zc3NrX09TfbVpcfd7b7F9TU1tgXVhYZerZ2fJaT09beuDZ2t3f29bU235eXXre2uVoVlNZX19aWGPq2NfuW09QXfng3N3c2dTU2+9kXGfs3N78XVZYXmFcVlho5djcc1VPVmzl3d3e3NXR0+FoVlZp39PX711TVFhbWFRZdNvR2HlWUFv63NfZ2dXPz9p2WFVl4NLV6GZZWFlXUU9Vbt3T2PFdVlx2597d29TOztlwVlFe6dXT33FcWFdSTk1Tat/U1+lqXmF66N7c2NPP0uFoVFRh59nb7mVcWltWUE5SYe/e4PVrZ3Xt4d/h3tnV2OdnWFll9ufseWReXVxZVVVaZvzs7vx89+je3d7h39vZ3vdlXWFv+35rX11eYmFeW1peZm93ennz5tzY2Nve5Ort7/h7cW1sa2ZgXVxbXWFobm5ua2xrbn7r3NXQ0tjlfW5te/Dq73llXFlXVlZZX2/v6vB0Z2Rr/eXa09HT2utuYV9ne+/r73BeVlJSV15s+uvo6Ovv7+ne2NbY3ej4end1dHR3e/t6bV9aV1pgbHFycf7q3dbT09Xa4Or4d3F1/vHt8nhoX11eY2179fd+c29479/Vz87T3Ofv+310bWprb3JxaWFeYGz76+nt8vLs5d/e3t7d29ve6XxsaGptbWdgW1tebPfp6Ozz9ene2dvh7Pbz7Ovyc2ZhZGtubWdjY2lweXV1/Ojc19fc5u7t5uLl92pdW15lbG5uc/7t6eru8u7q5ujq7uvn4+Po/GpjYWZsb21qaW53fnx6/u3f2tne7P56e/52bWdlanF6e3Z1d33z6+jq7/b49/Hw8vHt6urzcmdhY2p4+PHv8O/s6Ofq7/X08e3s7vL6f3duamlu/evn5+zv8/Du7vZ9ef7x6+v0eG9wefj18/Tv6+nq7vj9+vLu7fDy+Pt8dG5sbnj57urr7O3t7O3v8/Px7vH4e29vdfv29PXw7Ovq7/h8dnd7/vr38/Hv7/L3/P77+vn5+/r39fX5fXp6/ffw7/Z7dHV89/Lv7+3u7vV7cXJ4/PLv9Px1b3B0fvfv7enm6O37dXB4+e/u7fT7fXp6eXt6fv35/Htyb3B6+vj3/Pv9+/v+fnp9f/1+e3Z3en1+e3p2en38+Pn9env99/Xz9fP08vf8fHp7/3x7en38/P16dnd5/vjy7+7v8ft8eHV6ffz6/P19d3Z3enx5ent9fXp2dnz99vb19PT1+f57eXp7//36+/58enz89/L0+P58eXx5enp8///8/fz8/Pz8/fx+/v7+/P39e3h4//r3+H52cnV6fv79/v77+vx+dnV0dXh1dHN1d3l4dXR3fffz9ft+fHp8fXt2dnd8/Pv9fHp7/v7+fXx8/vr5/H16fPz29vf7/X58fH379/Xy8e/w8vj5+/n3+fn9f/77+/17eXp9/vr29vj+fXp8e3x7fH769/r8fHd1dHh5enp5ent4eHd3e//7+vv9eHdzdXh8/vz6+/x+e3d4e/35+fv+fXx9fn18fn3+/fz9fHd3dnp8enp4eHh4eXh1dHV4eXZ0b29xd3t6dnN0fH3+e3l2d3p6eXh4eXx6e3p3dnZ3fX1+fn3+/vv7/f77+PT09fp9eXd4ent7fn/+/f98e3z++vj7/n17e3t+e3x9fH18fHVzcnV3d3t6e3l8ff79fn59fX17e3x7fX1//v38/X58en5+/P7+/fz7+/3//vv49vf6/f38+ff6/f5+/vz9fnx5eHt+/v5+fX1+e3x7fX79+fn6/n58fn1+//78+/z9fn7++/r6+fr6/Pz8fn57fv77+/3+f/38/f97e3x+/fr8fn19fv58fnp9//3+e3x9/fr6+X59ff39/Xx6ent+/fz8/f59fn19/v39/Pz5+/v+/vz7+vv9/f38+vr6/P1//fn5+f39/fv6/Pz+/fr39vr7/fz6/Pt+fX19/37+fXx7f/75+fv+fnx9fn5+fv78/P59enp7fP7/fv96enl5d3l3eXp9f357eXZ4eHx9fnx5enp8e318fP5+/nx8e3p5enp8enp8/vv8/P99fH18fv59fXt8e3t5end4eX3+fX19fXt7enx9/n79/v19e3p7fv/8/f5+fHx+fX58fn19/n5+e3t8fvv7/H5+fH7+fXp4eXt9fXp4dXd6e398eXl5e318eXV0dHd7fHp2c3N1d3ZzcW9ydnl2dXN1eXp8e3h5eXx+e3dzcnV3enp5dnd4fHx6dnd6fP5+fnt8ff78/P1+/n39/v58env+/fv9/v79/fz8/n7+/vz6+fj6/Pr5+fr7+/z6+fr6/P39/f38fv7++/v+/v59/35+ff5///19/nz7/P39/v39/f1+ff7+ffr8+fr8/v39/n5+ff3+/355fH1//X98enx6e3x6enl5e319fnt9fHt8enx8ent9fnt7e37//f3/f3v+fv1/fn58fH1+fnx6e3l7e3x9fH1+fX59fHl6ent6eXh5eHl5e3h4eXh4eXp6eXh5eHh6eXl4eHp6enh3dnd3end4dXZ4eXp5enp7fXx7enl7en19fHt5eXl6fH16fHp8e3x6enl5e318fXx7e3t9fXx9fP9//X57e3p8fX59fHx8fn59fHp6e3x+fH15e3p9/v/9e3x9fv59fHt7fH5+fHd3d3l4e3p7e3x9/31+fXx9fH19fHt7fH5/fXt9fXx+/v9+/37+/v7+fX5+/fz7+/3+fn5+fX5+/f78/v1+/v78+vj29vb4+Pn3+fn6+Pn49vn4+/r6+/r9/f38+/z8+/v7+/z8/f3+/vz9/f38/v79/Pz8+/z9+/38/fz/f//+/P3+/f77/fz+/vx+/v5//n5+ff9///38/Pz+/v7+fvz9+fz7/P79/fv8+vv6/Pz8+vr7/Pv7+vv6/f5+/37+/vz7/Pv8+v38+vr5+vv8/Pv7+fv6/Pz9+/z8/v5+/v/9/f5+fXx9fn9+e315fHx7eXd2dnh3enh4d3h4eXl3d3h5enh3eHd4eXp4eHl7e3t9e3x9fH19fHx8e3x7fHx9fH18fXt6eXt9fX5+fnx6ent7eXx8fHx9/n3/fXx8fX19fX19fn19e3x7fXx9fXx9e3t7e3t7e319fn59fX5+f/79fv3+//1+fv9//vz9/v7+//7+/n79/v5+fn5+f318fnx9ff9+/318fn58fH18fn1+fP///n1+ff7+fnt9e3x7fnz/fH59f/58e3t9e3x7e3x9fX5+/v9/fX59//39/Pv6+vr7+/r7+vv6+fj49/j3+Pf2+Pf5+fr4+ff4+Pj5+fn6+vv5+fr7+/v5+vr5+/j6+fv8/Pv8+/v6/P79/fz8/P79f/3+/f37/Pr8+fr7+/z7+vr7+vv6+vz7+/r8/P38/f38/f38/f39/v/+/fz9/f1//n79/f3/fn5+//7//v5+/v9+fH1+/n1+fHx9fX7/fn3/ff7//n59/v7+fv59/v77+/r8/fz9+v75/Pz+/v39/Pv6+fr5+vr6/Pv6+vr6+/v9+/z8/fz8/vz7/Pz9/v38/f7/fn1+fX18ff///n58fXt8fHx8fX//fn5+fn5+fv3+/X59fX1+fv5+/n/+ff98/f/9//39/f5+/35+fn1+fX59fHx8e3x6e3t6ent6e3p6enp5enh7eXl5eXp7eXp5eXp6e3t6enl7e3t8e3x8fHx9fX58fX18fn5+/n7+fv99fn7+fn59fHx9fX59fn5+fn//fX5+/n/+/35+ff7+fv5+/v79fv59fn/+/n9+/v78/v3+/v78/fz+/f78/fz//n3///3+f/7++/z8/P3+/f38+v37/f39+/z9/X7+//38/f7+f/19/n19fv//fnx8e3x8fHp6enl7eXp5eXl5e3p7fHt8fHx8fXx7fHx+fv/+f/5+/Pr7+f3+f/7//f39/fz8/Pz+/P77/Pz8/Pv8+/z7/Pz8+/37+/r7+/r6+vv7+vv7/fv9/Pv9+/z6/Pr9/X//f/5///39/v79fn5//fz8/P7+fn5+/v79/P7+/v79/fz8+/z8/v1///7+/n5/ff59fXx8fn19fX18e3t5eXp5eHl4eHp4eXZ4eHl6fHl5enp6eXp5eXp7fHx6e33///79/vv8/P39/f3+/f79/f7+fn59fn1+fX//fX59fHt7ent7fH1+e316e3t6e3p6eXh5eXl5eXl4enh6eXl6eHh4d3l4eXh3d3d3dnd3d3Z2d3Z3d3V2dHR2d3Z1dHN0c3VzdHV3d3l3d3Z1c3Z1eHZ2dnZ1d3V4dnl5enp5dnd3eXh5d3h3d3d5d3d2eHt4eXd3d3h5eXp5fHd4d3d4eHp4enp5enh4dnd4eHh3eHl5eHZ2dnd4eHd4eXl5d3d3eHh4eHl3eXl6eHl5eHl4eHd3dnh3eHh4dnV2eHl5eHh5enp4eHV3eXh4eXd2d3d3dnZ3eHp5d3d1dXZ4dXV2d3h2dnV2dnh5eXl3eHd4eHh7eXx9fHh4eXl7e3t7fHx7enp6d3t4fHl7eXh4eHd6enp5d3Z1dXV2d3h4eHl3d3d3eXh3eHd2dHZ0d3d5dnd3eHd2dXh2eXl3d3d2eXd5eHl7e3t5eHd5ent6e3t7fHp7eXx8fXx8fXx+f35+fn5+/v5+fv/+/f7+/n7+fX5+fv5+fn7//v59fX3+/f38/v9+fn7/ff36+fj39/f39/j4+Pn4+fj6+vr8+vr4+Pj6+fn4+fr5+/n49/f49fTz9PP39/b29vj4+Pf4+Pj59/n3+fn5+Pn6+/v7/Pz8/fv9/fz9/fz8/f7//n7+/v3+/P37/P38/v39/f1+f/39/f39/f39/fz+f379/f3//v39//5+/n7+/v1+/v79/Pz8/f39/fz8/Pv7+/z8+/r5+vn59/j2+Pb2+Pf4+Pn5+Pj5+Pn2+Pj5+fn8+/z7+/5//v78/v1+/nx9fHx8fHp7e3l7eXt7e3t6e3p7eHl4ent8fX16enp8fXx6eXt6fHx7fHp7e3l7ent5eHh3eHZ5dnd3d3Z2dnV2d3h3dnR1dXV1dHZ1d3d4d3V3dnd4eHd3eHh4eXp5enp7fHx7e3t8fH77+fp9fHZ3d3v9+vr9fXx5enp7fP79/X98enl7fH79fn9+enp4enz+/n59eXp2eHh4eXl7fHt5eXp6enx7e3t8e3t8fv79/f7+/n7+/v79/Pv8+v39/v79/f38/fz++/39/v7+/v5+/v79/P38/f39/Pz9/f7+/f79/v1+/Pz8/X19ff5+fn5//n58fX59fX5+fn58fX1+fX58fHp7e3x8fX1+fn19e31+fn18fHx9fX16e3l6e3t7eXx6enp7e3x7e3p7e3x+fv7/f/7+/n99fn5/fn5+//79+/38/Pz8/v39/Pv8/v3+/fz8/Pv6+vn7+/v8+vv5+vj49/n3+fn6+fr6+fj39/j6+Pr5+vn6+fj7/Pv9/P38/v39/v19fXx9fn9+/n7/fn59fH1+fn9+fv5/fv7+f37+/v3+/f38+/z6/Pv+/fz7/Pz7+vn4+fz7/Pz8/Pz+/f37+/v8/fv8+fz5/vv9+vz6+vn6+/z+/fz8+/v6+vn5+Pr5+Pn29/n4+fn4+fn5+vn5+Pn6+vz5+vn5+vn6+/z8/vz7+vn6+vv9/n79/P1+/v37/f5+/Pz8+/z8/f1+/n77/v3/+/z+/n7+/v7//v7+fnx9fv7+//5+/X5+fn7+/v//ff5+fv7+/fz9/fv6/P39/P79+/z6+/r7/P37/Pr6/Pz+/v19/n7//v7+/v7+/f/+/n/+fn99fn5+fX///f5+/35+fn5+/v7+/3//fn7/ff59/f/+/Pz8+//+fv7//f38/f79/vz9/n19fv39/v/9/Pv8/Pr8+35+/vv7/f78+Pn+//z5+n5+/Pf5/X/69fr8/fn4+3/9+fj6/v38+fz8f/v7/P/9/fx+/n/8/f3+/v3+/n7//f37/f7+/v3+/n7+/n5+fv79/f7+/35+fX5+f37/fn/9/n58e3x7fXt9e3x8fX19fHt7fHp6fHx8fHp6fXt7ent8fHx6e3p7eXp4eHh3eXl7e3d3d3h6d3p3e3l6eXp7enp4eHl6eHh4d3d4d3h5enp4e3p7enh7eXp4enl7e3t6eXt6e3x7fHt5e3t+fXt7fH19fn59fX///f39+/37+/v8/fz9/fv7/P79/n7+/vz9/f39/v39/v38/v7+/vz8f/9+/35+fv79/fz+fn///f/9fX59fX1+fv/+/v5/fn1+fn/+/n7+/vz7fHp++/59e35//Hx7fP18eXx8fnx5eH39fXh5fP9+e3p8fX14e31+e3h6fHx7eXt8fXp7enx6enl7fHp6fHt+e3x7fHt8fHt8e3p3eHd5eHh5eHl5eHl5enl6e3t6e3p6eXl5eHh5eXp6eXh4eXh4eHh4eXd3eHd5d3p3d3Z4d3l5eXp6enl2eHd3dnZ2dnh2dnZ3dnh4d3h4eHZ1dnV1dXd4eHd3eHZ3d3h5eXt6enp6enh7eXt9fX1+/3/+fn3//v9+/f78/fz8/Pv8/P38/P3+/f39/v3+/fx/fn3+/v//fn59fXp7fX59fXt8e3t8en1+fn5+fn9+fX5+/v3+f/59fn19fX5+fX5+fn98fn18fHt+fHt8fHp7fH19fn5+fn18enp7fX17fXx+fX57fXt8fH1+fv7+fn18/X7+//7+/P/+/fz6/Pz7/Pz7+/r6+fn39vb4+fn49/f3+Pj4+Pv7+vj6+vn6+fr6+/z+/379/n59f/79fv3++/r7/P39/fz7/f79/v3+/f3/ffz8+vn7+vr79/f3+vr5+fv+/fv8/X/8+/v+//z6+vn49/n6+vn3+Pf4+f38+/n7/P338e/z8vTy8/Lx8vH08/Tz9fp+fv759/b28/Hz9PPv7u7t7e3v7/T09/n+/vv4+f3++vby7u3r6OXj4+Tm5unt9v16cW5tbGtsbW90e/bn3dfRzMzZd15bWVheb/54YllXWVpg+9rQzc3Lyc7wT0hNX/rv7PpfT0tPXnL14dPNztDQz9P0UElW7d7rfWxcTkxVanxuberV0dfb1MzK1WhTW3V3Zm1+blpQU1tdWl7t0c3U3NvOyMnbXlBWYmRlc/l3Y11eXllTWHfc197te3zey8DA0lhJS1RffNvU3W1VTk1OUVv93Njf9nn+4s7BvchqSUdMTlrmzcziWk1LS0xTcd3X3/J+b2j7zr67x19HR0tOX9XGyedTSUZFRlDz0c/a8HBjW2jRvbi//EhBRElZ1cHA0WFLRD8/TePKyNR8XFNOVeXFurrJbExJS1F4z8nQ9FlOSEJGXNvP1+ppWE9OYNW/t7jC+EpBQkto1crL2XdYS0RDS2Hf09Ha+F5UW+DFurnC8EpBP0NP4sjEzN5iTEI/Rlzay8zZc1NMUfbIu7m/21NFP0FP4sjCx9VoST07QFXdy8vcYE9NV+fGu7m/21RFQERT5crGzN9dSj89QlThz9PpaVxYX+PJvbvC3FpKRUVNddbP1elkUUlDRlFt7ujp73lqc+DOxcLH1PdZS0ZKW+fX2N3uY1JLSUxYbvLy9e/1+OPTysfK1ONqUkpLVGrv5d/f7mJTTk9XYGppZWdtfOjYzcfEx8/rW05KTFFf/d/Y2upvXVVQUVdaWl936+Hc1M7LzNLefl9XVFZfb/z0931uZWZpaWlkXl5kaW576uLl5eTo9m5mb/Xo5ebl5PZnXV1jZGNhXl1bWl5v+fLy7Obp+2lmduvg3Nvc3+n3fH38/nBoW1NPT1Nbbevd2tvi+W1laXnq39zd3d/r+3717vdvYFlVU1Nbb+nd2tvkdV5bX2/u4drY2+X+cvvl3Nrd6m9dVVRZaPTk3+Lwal1cX23y4Nvc4O5waG7z4NrZ3vNpXFdZYXH27uvxcGFeYW7z4t7f6PpuaGz96uLf4/VsX1xcZf/p4+TsdGFdXmR37+Xl6/lxbHP15d/f4+9xY1xcYm/z5uPk7nNlYWZuffLr6/R7eX327Onp6/F4amJgZm998+7t8XltaWlrcP7v7vL5/Pr+fvTu7fD5fW9sa2959/H0/HhtaGlvffbx8/X7/H19++/u7+/1/W9oZ212//nz8fp1b3F4ffv59fz+dHR3fP3++fLy+3ZtbXR2fffx8/9zdXl6fH39/H51cG1tcXr+9e7t8/17eHp8+/P2/Xl2d3VxdX359/Tz8vl9en738fHw8fT6en7y6ubs+3htamlrdXz48uzr7vX+eXl9//r5+P12cXR+8+vq6+77c2xrb3V7+PDv9v59/vr08PDz/Htzb3P97eXj5ez6b2lnbXj8+Ph+d25tbXb57err7vt3bWx09uro7O99bmlobXb9+fx5cG1ucX/y7Ovs7/t0bWx38ejp7PR2a2Znanj58O/4eHBvdHz69fXz9P13b291+u3q7PV2a2ViZGt1/vp+dm9ubW9uc3Z5eXJvbWxud/vx7/P7cmtmZ252/vz9e3ZwbWxvdn/69Pf+dHN0+nxrcvPu/HltbXV2dXh4c29ubm9ycnT/8u/8/n76+fr38/Z/d29ubnN1ffn19fX48/P8+3z8+vn19PX3+fTx7+/v9n17dW50ePz48fDx8P14dHFzePz8/Pf39e/x9PTx9vx8b25ydf/37+7x9H5vcG56fvP3+vX68fTr7eru8ff3/Xl7dv327/Dv9n52eX759e7z/fz1+vPw7uz49f37eH17/PPx6+/1/v79fPn68Pf5/X33/e7v6+3t8/P6+vn68/np8ez48vn/+nv9e3x2e3X6/PTv7e/u8/zyevx2fPj37/T5fnt8enp5efl++3389Pfw7e3w+H17fnt88fz47/39ff58eXp7ePj+fnz++nrv9vTx8f3+e3h7+fzz+Hv9dnp6+3J+c3h0eXF4evr2/O1w/W/+d/r8evN7+Xb4enV7fm5ydXp7b3Zw/HD78f72/Hp5+v7xePx+dXpwbm71avh1d3B0b213cXR2e3X1dvl9fn33aXJubnlse3NuaHZcX19j7eTj5+xvdWhocHByfXh08nn8+fjw9W15+HH+/nN58fry+/n7d3l98X3v+vX19314fXzu+/38/234fPj4ePt9fnD7bvh++fv09vb2dO/+7e7y9/xvd3Z6ffz6e/Pw631+cHd+9/nt83r5f/t2fHH/cP73e/n993d8eXx0cHp1dnh4dXR79n/2+Ht0dPb9e3t7c3d8d374+Pj1+ff5cP72/fns8nb7/v389PPu8PTv9XJ98vTw+vP5/m50dG5v+urt6u32/m9offt6/fr5d2557vx49XlmaXB7b3/w7/pxcnZyaXLyfnj87vRudP5xanb19XD+9/10e/Jvc3Tw+Xp48/FxfO99b+v2cG3/9nhzfet6b3r5dXT5fnt5+nx4eHn9c3F57356+fX2cXB87nV07/NvbX51aG54+Pp59fB7c/Lx/Pbz/Pr/dvl9cXnt8P91bHNvbfzp6u7w+nv9d2/87fD6+Pn0eX70eP3293Z8/f19dHr59m9ufn9wfO7o83ry7PtvdfTx+e3s6/b9eXJ0fPh4fvLr8n7783128+r1/vn5//Tr7vZ6+Px8ePz+cHR+8/n8e375/n35+fPu8/rs6fF/+O3xfHb39XhrbGxpaWt2fP7+fnd9+PL39Ofg6u3u+3l4dXd2d25oZWdmaW1sefzw7Ovr5N/q5ePo7v5tam1nZGNfXFtcXWdtbn7w9n379/3t39nb4evxeGppZ2lnZF1aW15fY3j08vT0+vr27+bf3t/j7fn+dGtscW5iXFlYWlhcZXP593x2d3r79ene2tjb4en9aWNobG1vbWxpYltZWltdYWz58PJ1bHvs5uXd2Nfe8WxgXmFrfPLs8m9hW1haWVhh/u3q83JtcXbu2tHP0trtbV9fa37u6Ox9amFeXF1jbHJrZ2hsb3V/8+zj3dfS0djrcmhqbXv57u74d2xnZmZobXX6935uZmZnb/bm4uLh2tLU421fYnjt6u73e21pZWhwen7v6erzcmdjZnP47OTg4OHd08/bbllZaO/n7/r9+XVlX2N09u7r6+18al9eYW7z497k8nd3+e3n5/RvZGJmbG9uaWdwfPju7/X07+nn7fn07uvt9XttampqaGtrbnJzffL39/389ezm6Onwfnd8/PP4fW9qa2lnZmZu/Pf7eHZ97+bm6u3w9/r/eHBtampsaGRiZG397erp6+74fffu8vxuam54/Hxycnx8dnd39+7t8fp9/vPu7vtuaW7993RlYGJrdXZtaW96+fj47+vj3+b9ZF1fa3d1bGdmaGtpam776+Pj6u7y7e31bmdpd/P3c2VibPzu8Xhucvfs6uvs6Ofq8nNpbf7t7f1taGlue3t1dfrs5ubr8O/r6+/1dW9xe355bWpqdfrx9f57/fLr6u3y9fP1fG5rbnh8e3Rub3N4d3R2fvXo5ujq7Orp6/h5bm50fv15bmppbnr3+Pj99Ozn6e/18ezp7X1pZGp6+X9vZ2VncHp/e/3w6ujq7e7p5OLq/m1pbHjv7PJ4a2lsdvv6+vj07vL4fHZze/Xs6ez3eXFye/r4+3pzcG94+vPz9Px+e359fHd3en707+3x/XZvcnv69fj6/Xl3cHJ4+PHv7/V9eXt9e31/+/bz9PX3+vr+fHd2d3d5d3l5ffz59fTy8PH19PTv7ezu+H5zb25wd/zz8fD2+/38/vn17+3r6enr7/P08/L0+Pt+fHt3dXJze/z6+ff69O/u7u7w8fPx8fb9eHn99vX5e3h1dXR4/vXv7+/w7+/x7/Hw8O/x9f5/fP5/+v94b25vc3d6ff36+Pr9ff358+7s7vL4/X9+fH19fXp0b21udHr8+ff28e/u7e7t7Ono6ezs7e3v9/x5d3VycW5vcXj9+Pn59vPv7e3v8fHx8vH09Pp9eXh2c3F0dHV1eXt8fH76+fT28fLv8PDz9PX19Pj5/P1+fv79/XxycHB3fffu7O3u9Pn7+PHt6+vq6+3v9/v9/Pn49ff+fXl4fX5+/fv29PPz8fHy8fLw7u3t7vP4/n12dHR4e/78/n55dnV7f/v5+vz9f31+e3x9/fv7fnl1dnv+/X19enn/f356eHn//fz+/nl5dnd5ef79fnt0cnV5/vv+/nx5eHh2eX3++Pn8end4ffz5+Pf5/P59//78+fn8+/z6+/j18/T2+fv9/v3+/Pr5+vn5/X56fPz69fj5+vj4+/5+/fv3+ft+end4eHh2c3N0d3d6en19fXd0eH3/+f7/fHZ1dHNzb3Bwc3JxcXJ2dHV0cnF1evv3+X53cG1tbW92e/5+fXZ0dXh5eHh3eX37/H53dHV3e358fHx7eXl6enh4d3d1c3V1dnh6e3t2cnF0d3t9fnp3dHV4fHx8enh5eHt5eHZ1d3Z3eHd4dXV0dHV5en7/fHd2dHNwbm9wcnNxb25tb290cXFycXFxcnV4eHl6d3JwcHR0dnZ4ent6dnRxcXF0dHNzcXFvcXV4e3l2c3BycnR3d3l7en16e3t7fn9+fXx8fn1+fn5+f33/fv38+/38/nx7d3l4d3RycnR4eXZ2dXR0cHJxc3h3eXh3dnN1dHR1dHV0d3R2dHNwb29wcHFycnJvcHFycnFwbnFwcXJwcW9vcG5ubXBwcXFvb25ub25vbm9vb29sbGtucXN0cHBxcnRzcXBvb21vbGtwcGxvcWxtc21vcnFvc3ZvcHBycnd3cG9ycHJycHNvcG9yb3Jzdnd1eHd3enp3d3V3end0dXR1dXR0c3R4enh2dHVydHRyc3JydnR1dXZ4dnd2dnV4d3V1dHNzc29yb3JvcnV0cHFzcnZ4c3VycnN0dHFzdHJxcXFwcHFvcXBwcnJydnh4enZ4eHd3enl7ent9e3p2dnJ1dXVzdXR2dHZ0dnZ4dnd6enp6eXl4eHl6fn//fv5//v5+fX38+vn5+/z7+vr6+fr5+/f6+vt+///6+/5+fn5+fv7/fn7+fnx8fH1+/nx6fH5+/n17fX1+fHt6eXt7fHp6fHx9e3x8fX58enp7enh8fHp6e3x8e3x4enl8enx7fv/+/n5+/f37+Pn5+/r4+Pr7+/j3+Pj4+ff59fT49/j19fj2+fj29/f49/j29vf39/bz9PPx9PP39PX1+ff4+Pb19vX49/n4+fn6+vr5+Pj5+Pf3+f3+f//+ff5+fX7+/fz9/P37+/z8+/n6+vv8+/n7+vr6/Pv6+vb39Pf29/f2+PT4+ff39fb3+Pb09vP19ff29/f4+Pb18fPz9vb39fT19PLw9PLy8fDv7+/u7u/t7u7u7+7v7u/u8fL7+/z8/fv8+vz7/Pv8+/z+/f38+/38/fv7+/z8+/z8/Pv6+vv6+/n7/v1+/fz9+/37/Pv8/f3+/Pz+/n5+fn7+/n5/fv39f359fX58fX19fn5+e3t6e3t9fH19enx8fHx5e3h7eXp4e3h5eXh4eXl5eHl2eXh6eHt5eXd4dnl5enp5enh6eXt8fH18fHt9fHx8fHt6enl7fnt8e3t7e318fHp7e319fn19fn3+fH59fn5+ff98fX3//v59/n78/Pr6/Pz8/f38/fz9/f79/f5/fv1//n79/v38/fz9/fz9/f7+/v39/fz8/P78+/r7+vr7+fv6+vj6+vr5/P39/X/9/fv8+/z9/v3+/v7+/f38/f39/v38/Pv+/v77+vz6+/v6+vn5/Pr9/fz7/P39/v3//35+fn5/fn97fXx9fn7//n7+f/7+/P78+/37/Pz8/Pz7+/r6+fr6+vr8/Pv8/Pz8/Pz8/Pz8/P38/v39///9/v1+/3/+/v1+fv/8//1+fX5/fX59fn7//v7+/f9+/37+fn5+fv99fX1+fv99fX59fn59fXx+fv79/f3/fv/+/fr8+fv5+/v9/f36+vr5+vr6+fr5+vr7+/j6+/38/f39+/z8/Pz8+/r9/f39/f5/fv79/P5+fv/+/fz9/Pz7+/z8/f39/Pz9/Pz7/P7+/v5+//99fHx+fX16e3t7fHt6enl7e3x6eXp5eXp5eHp5eHh4eXh4eHh5eXh4eHZ4d3p6e3h5eXh7e3x8e3x8fHx8eXp5e3x8e3p8e3x7e3t7e318fXt7eX18fnx9fHp8fHx8fXx9e3x8fHx6fn99/35+fX1+fX18fX9+fn18fHx+fX58fH19fXx8fX18fHx8e3p8e3p7e3p7e3p7eXp5enp6ent7enp7e3t7e317fHx+fn99fn3+f/99fn3+fv3//v79f33+fn19fX18fX59fnx8fHx9e3t7enp7fXt8e357fnt6eXp5e3t8e33/f319fPz/+/39/Pr6+fv7+/v7+fz8/Pv6+vr7+/v6+/v8/f37/Pv9/P38/v1//X39fn5+fn1+/35+fXx7fXx9fn7+fH58fH3/fv59fX59/P5+fn3+f/9+/n5+fX19fH7+/n5+fH18fH17fHt8ent6e3p6e3t8ent7fXt6enx5enl6enh5eXt6en16e3p7enl4d3h2eHV3dnV2dnV1c3Z0dXZ2d3l3d3Z4d3h5eHh4d3Z2d3l4enh4eXh4eXl6eXl7eHt3eXh4eHd4eHl6eXh3dXh4e3l4eHd4enl7eHh3eXh3dnZ3eXl6d3h3eHl6eHl3eHl6ent5enp7enx7fXx9e3t8fH18fHt9fX18fn3+//3+/vz9/P39/P78+/v8/P37+/39/v3+/v7/fX3+/fz+/v/+/Pv8+vr6+fn5+Pn4+vj59vf2+Pf3+Pb4+Pf5+Pj4+Pj3+Pf4+Pj4+Pf5+fj5+fr4+vr7/Pv6+fr5+v37+vn6+/v7+/38/f3+fn1//X5+fn7+f//+/n1+f//+/v//fvz9/f38+Pr5+vr7+fn6+fn7+vn7+Pv8/Pv7/fz8/P38/f5+fn5/fX5+fH18fXp7e31+fn99fv7//f/+fn5+fv/+fn59fHx8fH59fHx8fX18fHx9fH16e3l6enx7fXx8fHx9fX18fX7/fn17fHt9fv7+//59fXt+fH18fX1+fn18fHx9/37+f/5+/n/9/n7+/v78/v7//n79/vv+/P39/Pz7/vv9+v38/f38+/v6+vv7+/v9/P3+/v3+/f7+//3/f359/X7+fH57fnz+fn59fv99fH59/n5+fn19ff9+/n/+fn5+e3x+/n//fX18fXt8e3t6e3t9e3p8fX17fHp7fHx8enp6e318fn1+fH5+fnx9/v78/f39/fz9/vv+/Pz8+vz7/P37+/r7+vr6+vr7/Pr7/Pz9/f3+/fz8/H79ff7+/f3+/f7+/v79/Pz+/X/+/v3/fn5+/n/+/35+f/79/f/9/vz+/n///vz+/v7+/v7+/v39/f3+/v3+/v3+/n7/fn5+fv9+fv9+/n38f/z9+/z8+/z7/P39/v39/fz9+/37+vv7/P38/v39/f38/fz8/P38/vv9+/v6+/v5+vr5+vj5+fr6+vn49vb2+Pb49vf6+vr6+Pn5/Pz8+/v6+vz7+/r8+vz8/fz+/n1+fnx9ff7+/fv8+/v7/fv9/P77/Pz8+/v7+/v7/Pv8/Pz7+/37+/v9/Pz8+/z6+/r8+/z6+/z8/Pv9/P79/P38/f7+/v1+f3x+fn5+fH19fnx7fHx9/31+e3x7e3t5ent7ent4end5e3t9e3p7e3x8fHt9fX58fHx7fHt9fH1+/358e3t8fX1+fnx7fXt7fHt6e3x8e3l7eHp5eHt7fHx6eHp4enp5eXh4eXl4eHh5eHl4eHl1d3Z3eHh4eHh3dnd2d3d4dXd3ent8e3t7e3x7e3x8fnt9fHt7fX19e3t7fX59fXt9fX19e3t5e3x8enp6fHt8enp5eXp6enl8e3x6e3p6fHt6eHl8fH99fn19/n7+fn7+/f5+/n1+/v9/fn5+/v79fv9+/f37/f/+/v79/v7+/Pv7+/39/fz8/v38+fn5+/r5+Pf5+fr49/f1+Pj49/f49/j29PT29vj29fX39/n4+Pf59ff19vb29/f39/f5+vn5+Pj6+fn4+fn7+/v9+/z7/P38/fz9+/r7/P39//7//f5+fn7+/f5+fHt8fn5+fXt+enx9fXt9enx6e3p7fHt8fH19fX1+fn19fH3//v5+fn5+//79/v7//f39/Pz7/Pr8+/v7+vr6+vr6+vr7+vr6/Pv8+vv9/P79/Pv5+vj7/P39/f38/P39/P39/n7+ff7+/n18fHx7fXx7e3t8e3l5enl6eXp5eXh5eXp5ent8fXt8ent7fHx7e358fX1+fHx9fX18fXx9e3p6fHp7e317enh6eXt5ent7enl6eXl7eXt5ent7fXx9fXx+f/9+fH59fX57fnx+f/7+f//9/f77ff5+/X//fn7/fn18fX1+/358fH1+fv9+fX5+/37+fv7+/X5+fn5//f39fn59fnx9fHx9fXx9fHp9fH19fHt7e3t5fXp6fH1+fHx7fXt8e3x8fnx+e3x7enp7e317fHt8e3t7fXx7e3t6enp7ent6enp5eHl5enp4eXh5e3x8fHt6fHx8e317fX18fnx+fX9+fn3//fz8/f7++/v8+/v7+/v7+/z8+/37/P38/v7+/P39/vz+/Pz7+/v7+/39/vz7/Pz8+/38/Pz+//39/Pz7+vz6+/v6+/r6+vr6+/v7+vz8/f38/v79/fv7/f3+/v39/P7+/fz8/n59fv39/f3+///+/v1+/v79/P3+//7+/Pz9/f7+/f/+//78//1+fn5+fX59f//9/P7+ff5+/f79/v7//f79/fz9+/39/v39/fz7/fz7/f1+f/7+/Pv7/P39/f1//37//f5/fXt9fv79/fz9/f5+fX1+/vz9/v9+fn5//n79/vv8/H//fH3/f/5+//7+fn/9/fv7/P39fv1/+v37/fz7/Pr9/Pz6+vr5+vv8/v39/f38/f3+/v79/vz7+fv6/P39/f39+/v7+/z8/f77+/r8/P7+/P38/Pz7/fv6+fv7/A=="}


def predict():
    now = time.time()
    request_read_time = time.time() - now
    now = time.time()
    audio_data = audio_dict['msg']

    # remove the WAVE header - note - not do be done in twilio integration
    message_bytes = base64.b64decode(audio_data)[44:]
    print(message_bytes)
    audio_array = np.frombuffer(audioop.ulaw2lin(message_bytes, 2), dtype=np.int16) / 32767
    print(audio_array.shape)
    audio_array = resample(audio_array, sr_native, sr_target, res_type="kaiser_fast")

    # audio_array = np.frombuffer(message_bytes, dtype=np.uint8, count=-1)
    # print(audio_array[:5])
    # audio_array = mu_expand(audio_array)
    # audio_array = audioop_ulaw_expand(audio_array) / 32767
    # audio_array = mu_expand(audio_array)
    # audio_array = audioop.ratecv(48000)
    # message_bytes, _ = audioop.ratecv(message_bytes, 1, 1, 8000, 48000, None)

    sf.write("sample-audio/sound2.wav", audio_array, 8000)

    audio_array.shape = (-1, 1)
    print(audio_array.shape)

    if isinstance(audio_array, (list, tuple)):
        audio_array, granularity = audio_array
    else:
        audio_array, granularity = audio_array, None
    buffer_read_time = time.time() - now
    now = time.time()
    result = predictor.run(audio_array, granularity=granularity)
    prediction_time = time.time() - now
    # return result
    return json.dumps({
        "result": [i.tolist() for i in result],
        "prediction_time": prediction_time,
        "buffer_read_time": buffer_read_time,
        "request_read_time": request_read_time,
        "granularity": 1 if granularity is None else granularity
    })


if __name__ == "__main__":
    result = predict()
    print(result)
